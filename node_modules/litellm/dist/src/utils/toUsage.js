"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.toEmbeddingUsage = exports.toUsage = exports.countTokens = void 0;
const encoders_1 = require("./encoders");
function countTokens(text) {
    return encoders_1.encoderCl100K.encode(text).length;
}
exports.countTokens = countTokens;
function toUsage(prompt, completion) {
    if (!completion) {
        return undefined;
    }
    const promptTokens = countTokens(prompt);
    const completionTokens = countTokens(completion);
    return {
        prompt_tokens: promptTokens,
        completion_tokens: completionTokens,
        total_tokens: promptTokens + completionTokens,
    };
}
exports.toUsage = toUsage;
function toEmbeddingUsage(prompt) {
    const promptTokens = encoders_1.encoderCl100K.encode(prompt);
    return {
        prompt_tokens: promptTokens.length,
        total_tokens: promptTokens.length,
    };
}
exports.toEmbeddingUsage = toEmbeddingUsage;
